<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Simple Finance</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; margin: 20px; }
    .row { display: flex; gap: 8px; margin-bottom: 10px; flex-wrap: wrap; }
    input, select, button { padding: 8px; }
    table { width:100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #f5f5f5; }
    .credit { color: green; }
    .debit { color: #b00020; }
    .totals { margin-top: 10px; font-weight: 600; }
  </style>
</head>
<body>
  <h2>Simple Credit/Debit Tracker</h2>

  <form method="post" action="/set-month" class="row">
    <label>Select month:</label>
    <input type="month" name="month" value="{{ month }}">
    <button type="submit">Load</button>
  </form>

  <div class="row">
    <form method="post" action="/credit">
      <input type="hidden" name="month" value="{{ month }}">
      <input type="number" name="amount" step="0.01" placeholder="Credit amount" required>
      <input type="text" name="description" placeholder="Description">
      <button type="submit">Credit</button>
    </form>

    <form method="post" action="/debit">
      <input type="hidden" name="month" value="{{ month }}">
      <input type="number" name="amount" step="0.01" placeholder="Debit amount" required>
      <input type="text" name="description" placeholder="Description">
      <button type="submit">Debit</button>
    </form>
  </div>

  <div class="totals">
    Total Credit: {{ '%.2f' % total_credit }} |
    Total Debit: {{ '%.2f' % total_debit }} |
    Available: {{ '%.2f' % available }}
  </div>

  <table>
    <thead>
      <tr><th>Date</th><th>Type</th><th>Amount</th><th>Description</th><th>Action</th></tr>
    </thead>
    <tbody>
      {% for t in transactions %}
      <tr>
        <td>{{ t[1] }}</td>
        <td class="{{ t[3] }}">{{ t[3].title() }}</td>
        <td>{{ '%.2f' % t[4] }}</td>
        <td>{{ t[5] }}</td>
        <td>
          <form method="post" action="/delete/{{ t[0] }}">
            <input type="hidden" name="month" value="{{ month }}">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
